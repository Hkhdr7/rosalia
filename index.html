<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rosalia Assistant</title>
  <!-- ElevenLabs widget -->
  <script src="https://elevenlabs.io/convai-widget/index.js" async></script>
  <!-- Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <style>
    body { background-color: #0b0e11; color: #fff; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; margin: 0; }
    .scanner {
      border-radius: 50%;
      /* Futuristic rotating conic gradient ring */
      border: 6px solid transparent;
      border-image: conic-gradient(from 0deg at 50% 50%, #00ffff, #ff00ff, #00ff00, #00ffff) 1;
      animation: rotate 4s linear infinite, glow 2s ease-in-out infinite alternate;
    }
    @keyframes rotate {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }
    @keyframes glow {
      from { box-shadow: 0 0 10px rgba(0,255,255,0.7); }
      to   { box-shadow: 0 0 20px rgba(255,0,255,0.7); }
    }
  </style>
</head>
<body class="flex flex-col items-center justify-start min-h-screen p-4 md:p-8 lg:p-12">
  <!-- Header -->
  <header class="w-full flex justify-between items-center mb-6">
    <h1 class="text-blue-400 font-bold text-xl md:text-2xl lg:text-3xl">ROSALIA</h1>
    <div class="text-blue-400 text-sm md:text-base">Online</div>
  </header>

  <!-- Scanner -->
  <div class="scanner w-32 h-32 md:w-48 md:h-48 lg:w-64 lg:h-64 mb-4"></div>
  <!-- Title replaced -->
  <div class="text-blue-300 text-xs md:text-sm tracking-widest mb-8">Rosaria</div>

  <!-- Voice Widget -->
  <div class="w-full px-2 md:w-3/4 lg:w-1/2 mb-8">
    <elevenlabs-convai agent-id="1wvdfa7r893PzxTCY3Pf"></elevenlabs-convai>
  </div>

  <!-- Email Input -->
  <form id="emailForm" class="w-full px-2 md:w-3/4 lg:w-1/2 flex flex-col sm:flex-row sm:space-x-2 space-y-3 sm:space-y-0">
    <input id="emailInput" type="email" placeholder="Enter your emailâ€¦" required
      class="flex-grow bg-gray-800 border border-gray-600 text-white placeholder-gray-400 px-4 py-2 rounded focus:outline-none focus:border-blue-500" />
    <button id="sendBtn" type="submit"
      class="bg-blue-600 hover:bg-blue-700 disabled:opacity-50 p-2 rounded text-white flex items-center justify-center sm:w-auto w-full">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10l9-3 9 3-9 3-9-3zm0 4l9 3 9-3" />
      </svg>
    </button>
  </form>
  <div id="confirmationMsg" class="mt-4 text-green-400 text-sm opacity-0 transition-opacity">ðŸ“§ Confirmation sent!</div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('emailForm');
      const emailInput = document.getElementById('emailInput');
      const sendBtn = document.getElementById('sendBtn');
      const confirmationMsg = document.getElementById('confirmationMsg');

      form.addEventListener('submit', async e => {
        e.preventDefault();
        const email = emailInput.value.trim();
        if (!email) { emailInput.focus(); return; }
        sendBtn.disabled = true;
        try {
          const res = await fetch('https://kaizen-ai.app.n8n.cloud/webhook/rosaria', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
          });
          if (!res.ok) throw new Error(res.statusText);
          confirmationMsg.style.opacity = 1;
          setTimeout(() => confirmationMsg.style.opacity = 0, 3000);
          form.reset();
        } catch (err) {
          console.error('Email send failed:', err);
          alert('Failed to send email.');
        } finally {
          sendBtn.disabled = false;
        }
      });
    });
  </script>
</body>
</html>
